import { zodResolver } from "@hookform/resolvers/zod"
import { useImperativeHandle } from "react"
import { useForm } from "react-hook-form"
import { z } from "zod"
import Form from "@/components/ui/form"
import { GeneralModalComponentProps } from "../types"

export const schema = z.object({})
export type SchemaType = z.infer<typeof schema>

export interface PleaseConnectWalletDefaultValues extends SchemaType {}
export interface PleaseConnectWalletSuccessValues extends SchemaType {}
export interface PleaseConnectWalletErrorValues {}

export interface PleaseConnectWalletProps
  extends GeneralModalComponentProps<PleaseConnectWalletDefaultValues> {}

const PleaseConnectWallet = ({
  outerRef,
  defaultValues,
  onSuccess,
  onError,
}: PleaseConnectWalletProps) => {
  const methods = useForm<SchemaType>({
    resolver: zodResolver(schema),
    defaultValues,
  })

  const handleSubmit = methods.handleSubmit((values) => {
    onSuccess(values)
    onError(null)
  })

  // The actions will trigger me
  useImperativeHandle(outerRef, () => ({
    reset() {},
    submit() {
      handleSubmit()
    },
  }))

  return (
    <Form methods={methods} onSubmit={handleSubmit} className="flex flex-col justify-center items-center gap-4">
      <h2 className="text-center text-sm">Your Profile</h2>
      <svg
        width="54"
        height="54"
        viewBox="0 0 54 54"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M49.5 23.4373H47V15.1039C46.9993 14.4411 46.7356 13.8057 46.267 13.337C45.7983 12.8683 45.1628 12.6047 44.5 12.6039H36.1667V6.22984C36.1667 5.83907 36.0752 5.45374 35.8993 5.10477C35.7235 4.75581 35.4683 4.45293 35.1542 4.22047C34.8401 3.988 34.4759 3.83243 34.0907 3.76623C33.7056 3.70003 33.3104 3.72505 32.9367 3.83929L4.12901 12.6414C3.53825 12.7294 2.9986 13.0262 2.60797 13.478C2.21735 13.9298 2.00164 14.5067 2 15.1039V48.4373C2.00072 49.1001 2.26435 49.7356 2.73303 50.2042C3.20172 50.6729 3.83718 50.9366 4.5 50.9373H44.5C45.1628 50.9366 45.7983 50.6729 46.267 50.2042C46.7356 49.7356 46.9993 49.1001 47 48.4373V40.1039H49.5C50.1628 40.1032 50.7983 39.8396 51.267 39.3709C51.7356 38.9022 51.9993 38.2668 52 37.6039V25.9373C51.9993 25.2745 51.7356 24.639 51.267 24.1703C50.7983 23.7016 50.1628 23.438 49.5 23.4373ZM32.8333 7.35614V12.6039H15.658L32.8333 7.35614ZM43.6667 47.6039H5.33333V15.9373H43.6667V23.4373H37C36.3372 23.438 35.7017 23.7016 35.233 24.1703C34.7643 24.639 34.5007 25.2745 34.5 25.9373V37.6039C34.5007 38.2668 34.7643 38.9022 35.233 39.3709C35.7017 39.8396 36.3372 40.1032 37 40.1039H43.6667V47.6039ZM48.6667 36.7706H37.8333V26.7706H48.6667V36.7706Z"
          fill="white"
        />
        <path
          d="M25.3332 19.2705C19.7243 19.3252 18.4583 27.1107 23.6666 28.9788L23.6665 35.9372H18.3748C16.5101 30.7265 8.71495 32.0004 8.6665 37.604C8.66576 38.7831 9.08206 39.9246 9.84177 40.8264C10.6015 41.7282 11.6556 42.3323 12.8178 42.5318C13.98 42.7312 15.1752 42.5133 16.1922 41.9165C17.2092 41.3197 17.9823 40.3824 18.3748 39.2705H25.3332C25.7752 39.2705 26.1991 39.0949 26.5117 38.7823C26.8242 38.4698 26.9998 38.0459 26.9998 37.6038V28.9788C28.1037 28.5792 29.0318 27.8042 29.622 26.7893C30.2121 25.7745 30.4266 24.5844 30.228 23.4274C30.0293 22.2704 29.4302 21.2201 28.5354 20.4601C27.6406 19.7002 26.5071 19.2791 25.3332 19.2705ZM13.6665 39.2705C13.2287 39.2642 12.8109 39.0858 12.5035 38.7739C12.1961 38.462 12.0238 38.0417 12.0239 37.6038C12.0239 37.1659 12.1962 36.7456 12.5036 36.4337C12.811 36.1219 13.2287 35.9435 13.6666 35.9372C14.1044 35.9435 14.5222 36.1219 14.8296 36.4338C15.1369 36.7457 15.3092 37.166 15.3092 37.6039C15.3092 38.0418 15.1369 38.4621 14.8295 38.7739C14.5221 39.0858 14.1043 39.2642 13.6665 39.2705ZM25.3332 25.9372C24.8953 25.9308 24.4776 25.7524 24.1702 25.4405C23.8628 25.1287 23.6905 24.7084 23.6905 24.2705C23.6905 23.8326 23.8629 23.4123 24.1702 23.1004C24.4776 22.7886 24.8954 22.6102 25.3332 22.6038C25.7711 22.6102 26.1889 22.7886 26.4962 23.1005C26.8036 23.4123 26.9759 23.8327 26.9759 24.2705C26.9759 24.7084 26.8036 25.1287 26.4962 25.4406C26.1888 25.7525 25.771 25.9308 25.3332 25.9372Z"
          fill="white"
        />
        <path
          d="M11.1666 20.0998C11.1602 19.662 10.9818 19.2442 10.67 18.9368C10.3581 18.6294 9.93777 18.4571 9.49988 18.4572C9.06199 18.4572 8.64169 18.6295 8.32983 18.9369C8.01796 19.2443 7.83959 19.662 7.83325 20.0999C7.83961 20.5377 8.018 20.9555 8.32988 21.2629C8.64176 21.5702 9.06207 21.7425 9.49996 21.7425C9.93785 21.7425 10.3581 21.5702 10.67 21.2628C10.9819 20.9554 11.1602 20.5376 11.1666 20.0998Z"
          fill="white"
        />
      </svg>
      <p className="text-center text-sm">
        Please connect your wallet <br /> to manage your profile.
      </p>
    </Form>
  )
}

export default PleaseConnectWallet
